{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/env/env.pipe.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/label/label.pipe.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../src/js/controls/control.component.js","../../src/js/controls/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/controls/control-custom-select.component.js","../../src/js/controls/control-file.component.js","../../src/js/controls/control-text.component.js","../../src/js/controls/errors.component.js","../../src/js/controls/test.component.js","../../src/js/controls/controls.module.js","../../src/js/common/http/http.service.js","../../src/js/controls/age.validator.js","../../src/js/controls/birth-date.validator.js","../../src/js/controls/form.service.js","../../src/js/urban-form/urban-form.component.js","../../src/js/app.module.js","../../src/js/urban-enter/urban-enter.js","../../src/js/urban-video/urban-video.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","__proto__","AppComponent","_Component","apply","arguments","onInit","getContext","node","classList","remove","Component","meta","selector","DROPDOWN_ID","DropdownDirective","_Directive","_proto","_this","trigger","getAttribute","querySelector","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","pipe","takeUntil","unsubscribe$","subscribe","id","add","event","contains","addDocumentListeners","next","dropped","removeDocumentListeners","getValue","addEventListener","document","removeListeners","removeEventListener","onDestroy","nextId","get","dropdown","id_","Directive","inputs","outputs","BehaviorSubject","DropdownItemDirective","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","URLSearchParams","window","location","search","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","options","assign","getAbsoluteUrl","path","params","url","origin","replace","getPath","isLocal","href","set","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","markets","defaultMarket","currentMarket","languages","defaultLanguage","currentLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","required","select_file","update","upload","drag_and_drop_images","environmentOptions","api","assets","workers","image","prefetch","configureProduct","reservedArea","template","modal","userModal","projectsRegistrationModal","materialsModal","marketsAndLanguagesModal","googleMaps","apiKey","thron","clientId","environment","EnvPipe","_Pipe","transform","keypath","env","k","shift","Pipe","name","FlagPipe","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","RegExp","join","IdDirective","onChanges","setAttribute","LabelForDirective","labelFor","LabelPipe","labels_","getKeys","_len","_key","map","x","setLabels","LABELS","TitleDirective","title","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","concat","ControlComponent","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keydown$_","fromEvent","shareReplay","keyup$","keyup$_","keys$","keys$_","type","startWith","key$","key$_","regexp","filter","match","typing$","typing$_","to","typing","clearTimeout","setTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","items","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","push","Error","_readOnlyError","slice","change","hasOption","getLabel","v","find","onDropped","$event","touched","multiple","ControlFileComponent","file","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","result","ControlTextComponent","disabled","ErrorsComponent","TestComponent","onTest","test","onReset","reset","ControlsModule","HttpService","http$","method","data","format","userPass","response_","headers","Accept","Content-Type","body","JSON","stringify","undefined","credentials","btoa","Headers","from","fetch","then","response","typedResponse","contentType","json","text","ok","Promise","reject","error","warn","resolve","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","DATE_REGEXP","BirthDateValidator","FormValidator","Date","exec","NaN","parse","_","isValidDate","birthDate","valid","FormService","toSelectOptions","unshift","UrbanFormComponent","currentStep","onNext","onPrev","nexts","call","querySelectorAll","prevs","prev","success","years","FormGroup","step0","picture","FormControl","Validators","RequiredValidator","step1","firstName","lastName","date","now","getFullYear","getMonth","getDate","age","telephone","email","EmailValidator","address","userName","category","step2","parentFirstName","parentLastName","parentIdCard","parentTelephone","parentEmail","step3","rulesChecked","privacyChecked","checkRequest","antiforgery","checkField","controls","changes$","pushChanges","group","isOfAge","onSubmit","model","_this2","submitted","first","birthDateValue","AppModule","CoreModule","FormModule","bootstrap","UrbanEnter","onScroll","destroy","h","innerHeight","rect","getBoundingClientRect","Math","max","min","top","init","UrbanVideo","video","paused","play","pause","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t}\r\n\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona il file',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\nconsole.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/giorgetti/api',\r\n\tassets: '/giorgetti/',\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/giorgetti/products-configure.html`,\r\n\t\treservedArea: `/giorgetti/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/giorgetti/user-modal.html',\r\n\t\t\tprojectsRegistrationModal: '/giorgetti/projects-registration-modal.html',\r\n\t\t\tmaterialsModal: '/giorgetti/materials-modal.html',\r\n\t\t\tmarketsAndLanguagesModal: '/giorgetti/markets-and-languages-modal.html',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyAIsa4g8z-HPPwohsf8jzVTbKw-DiI8k5w',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t}\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/Client/docs/api',\r\n\tassets: '/Client/docs/',\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/giorgetti/main/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/Client/docs/products-configure.html`,\r\n\t\treservedArea: `/Client/docs/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tuserModal: '/template/modals/user-modal.cshtml',\r\n\t\t\tprojectsRegistrationModal: '/template/modals/projects-registration-modal.cshtml',\r\n\t\t\tmaterialsModal: '/template/modals/materials-modal.cshtml',\r\n\t\t\tmarketsAndLanguagesModal: '/template/modals/markets-and-languages-modal.html',\r\n\t\t}\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t}\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[id]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[labelFor]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona il file',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\tTitleDirective,\r\n];\r\n\r\nconst pipes = [\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input type=\"checkbox\" class=\"control\" [id]=\"control.name\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"control.name\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../common/dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../common/keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = value ? items.find(x => x.id === value || x.name === value) : null;\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple', 'select'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<div class=\"group--control-select\">\r\n\t\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--control group--control--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input name=\"file\" type=\"file\" id=\"picture\" accept=\".jpg,.jpgeg,.png,.tiff\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t\t<div class=\"control\" [innerHTML]=\"file?.name || ('select_file' | label)\"></div>\r\n\t\t\t<button type=\"button\" class=\"btn btn--file\" [innerHTML]=\"'upload' | label\"></button>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--control\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input type=\"text\" class=\"control\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../common/label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ControlCheckboxComponent } from './control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './control-custom-select.component';\r\nimport { ControlFileComponent } from './control-file.component';\r\nimport { ControlTextComponent } from './control-text.component';\r\nimport { ErrorsComponent } from './errors.component';\r\nimport { TestComponent } from './test.component';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlFileComponent,\r\n\tControlTextComponent,\r\n\tErrorsComponent,\r\n\tTestComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class ControlsModule extends Module { }\r\n\r\nControlsModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\tconst options = {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport const DATE_REGEXP = new RegExp(/^(\\d{1,2})[\\/|\\-|\\s](\\d{1,2})[\\/|\\-|\\s](\\d{4})$/);\r\n\r\nexport default function AgeValidator(years) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tif (!value) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet date;\r\n\t\tif (value instanceof Date) {\r\n\t\t\tdate = value;\r\n\t\t} else {\r\n\t\t\tconst match = DATE_REGEXP.exec(value);\r\n\t\t\tif (!match) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tdate = new Date(`${match[2]}/${match[1]}/${match[3]}`);\r\n\t\t}\r\n\t\tconst now = new Date();\r\n\t\tif (now.getFullYear() - date.getFullYear() >= years &&\r\n\t\t\tnow.getMonth() - date.getMonth() >= 0 &&\r\n\t\t\t(now.getMonth() - date.getMonth() > 0 || now.getDate() - date.getDate() >= 0)) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tage: years\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport const DATE_REGEXP = new RegExp(/^(\\d{1,2})[\\/|\\-|\\s](\\d{1,2})[\\/|\\-|\\s](\\d{4})$/);\r\n\r\nfunction isValidDate(value, match) {\r\n\ttry {\r\n\t\treturn Date.parse(value) !== NaN;\r\n\t} catch (_) {\r\n\t\ttry {\r\n\t\t\treturn Date.parse(`${match[2]}/${match[1]}/${match[3]}`) !== NaN;\r\n\t\t} catch (_) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default function BirthDateValidator() {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tif (!value) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (value instanceof Date) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst match = DATE_REGEXP.exec(value);\r\n\t\treturn match && isValidDate(value, match) ? null : {\r\n\t\t\tbirthDate: {\r\n\t\t\t\tvalid: false\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n}\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { HttpService } from '../common/http/http.service';\r\nimport AgeValidator from '../controls/age.validator';\r\nimport BirthDateValidator from '../controls/birth-date.validator';\r\nimport { FormService } from '../controls/form.service';\r\n\r\nexport const DATE_REGEXP = new RegExp(/^(\\d{1,2})[\\/|\\-|\\s](\\d{1,2})[\\/|\\-|\\s](\\d{4})$/);\r\n\r\nexport class UrbanFormComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.node = node;\r\n\t\tthis.currentStep = 0;\r\n\t\tthis.onNext = this.onNext.bind(this);\r\n\t\tthis.onPrev = this.onPrev.bind(this);\r\n\t\tconst nexts = this.nexts = Array.prototype.slice.call(node.querySelectorAll('.btn--next'));\r\n\t\tnexts.forEach(next => {\r\n\t\t\tnext.addEventListener('click', this.onNext);\r\n\t\t});\r\n\t\tconst prevs = this.prevs = Array.prototype.slice.call(node.querySelectorAll('.btn--prev'));\r\n\t\tprevs.forEach(prev => {\r\n\t\t\tprev.addEventListener('click', this.onPrev);\r\n\t\t});\r\n\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tstep0: new FormGroup({\r\n\t\t\t\tpicture: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tstep1: new FormGroup({\r\n\t\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tbirthDate: new FormControl(null, [Validators.RequiredValidator(), BirthDateValidator(), AgeValidator(14)]),\r\n\t\t\t\ttelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t\taddress: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tuserName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tcategory: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tstep2: new FormGroup({\r\n\t\t\t\tparentFirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tparentLastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tparentIdCard: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tparentTelephone: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tparentEmail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t}),\r\n\t\t\tstep3: new FormGroup({\r\n\t\t\t\trulesChecked: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t\tprivacyChecked: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\t}),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tconst category = controls.step1.controls.category;\r\n\t\tcategory.options = FormService.toSelectOptions(window.category.options);\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNext(event) {\r\n\t\tlet group = this.controls[`step${this.currentStep}`];\r\n\t\tif (!group.valid) {\r\n\t\t\tObject.keys(group.controls).forEach(key => {\r\n\t\t\t\tgroup.controls[key].touched = true;\r\n\t\t\t});\r\n\t\t\t// group.touched = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconsole.log('onNext', this.currentStep, this.form);\r\n\t\tif (this.currentStep === 1 && this.isOfAge) {\r\n\t\t\tthis.currentStep = 3;\r\n\t\t} else if (this.currentStep === 1 && !this.isOfAge) {\r\n\t\t\tthis.currentStep = 2;\r\n\t\t} else if (this.currentStep < 3) {\r\n\t\t\tthis.currentStep++;\r\n\t\t}\r\n\t\tgroup = this.controls[`step${this.currentStep}`];\r\n\t\tgroup.touched = false;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonPrev() {\r\n\t\tif (this.currentStep > 0) {\r\n\t\t\tthis.currentStep--;\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tget isOfAge() {\r\n\t\tconst birthDateValue = this.form.controls.step1.controls.birthDate.value;\r\n\t\tif (!birthDateValue) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst match = DATE_REGEXP.exec(birthDateValue);\r\n\t\t\tif (!match) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst date = new Date(`${match[2]}/${match[1]}/${match[3]}`);\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tif (now.getFullYear() - date.getFullYear() >= 18 &&\r\n\t\t\t\t\tnow.getMonth() - date.getMonth() >= 0 &&\r\n\t\t\t\t\t(now.getMonth() - date.getMonth() > 0 || now.getDate() - date.getDate() >= 0)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSubmit(model) {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UrbanFormComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tHttpService.post$('/api/url', form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(_ => {\r\n\t\t\t\tthis.success = true;\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UrbanFormComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUrbanFormComponent.meta = {\r\n\tselector: '[urban-form]',\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { CommonModule } from './common/common.module';\r\nimport { ControlsModule } from './controls/controls.module';\r\nimport { UrbanFormComponent } from './urban-form/urban-form.component';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tControlsModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tUrbanFormComponent,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","export class UrbanEnter {\r\n\r\n\tconstructor(node) {\r\n\t\tthis.node = node;\r\n\t\tthis.currentStep = 0;\r\n\t\tthis.onScroll = this.onScroll.bind(this);\r\n\t\twindow.addEventListener('scroll', this.onScroll);\r\n\t\tthis.onScroll();\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\twindow.removeEventListener('scroll', this.onScroll);\r\n\t}\r\n\r\n\tonScroll() {\r\n\t\tconst w = window.innerWidth;\r\n\t\tconst h = window.innerHeight;\r\n\t\tconst node = this.node;\r\n\t\tconst rect = node.getBoundingClientRect();\r\n\t\tlet pow = Math.max(0, Math.min(1, 1 - (rect.top - h / 2) / (h / 2)));\r\n\t\tif (pow > 0) {\r\n\t\t\tnode.classList.add('enter');\r\n\t\t} else {\r\n\t\t\tnode.classList.remove('enter');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic items = [];\r\n\r\n\tstatic init() {\r\n\t\treturn this.items = Array.prototype.slice.call(document.querySelectorAll('[urban-enter]')).map(node => new UrbanEnter(node));\r\n\t}\r\n\r\n\tstatic destroy() {\r\n\t\treturn this.items.forEach(item => item.destroy());\r\n\t}\r\n}\r\n","export class UrbanVideo {\r\n\r\n\tconstructor(node) {\r\n\t\tthis.node = node;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tnode.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tconst node = this.node;\r\n\t\tnode.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tonClick() {\r\n\t\tconst node = this.node;\r\n\t\tconst video = node.querySelector('video');\r\n\t\tif (video.paused) {\r\n\t\t\tvideo.play();\r\n\t\t\tnode.classList.add('playing');\r\n\t\t} else {\r\n\t\t\tvideo.pause();\r\n\t\t\tnode.classList.remove('playing');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic items = [];\r\n\r\n\tstatic init() {\r\n\t\treturn this.items = Array.prototype.slice.call(document.querySelectorAll('[urban-video]')).map(node => new UrbanVideo(node));\r\n\t}\r\n\r\n\tstatic destroy() {\r\n\t\treturn this.items.forEach(item => item.destroy());\r\n\t}\r\n}\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\nimport { UrbanEnter } from './urban-enter/urban-enter';\r\nimport { UrbanVideo } from './urban-video/urban-video';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tconst enters = UrbanEnter.init();\r\n\t// const forms = UrbanForm.init();\r\n\tconst videos = UrbanVideo.init();\r\n});\r\n\r\nBrowser.bootstrap(AppModule);\r\n\r\n/*\r\n// FORM WIZARD\r\n\r\nconst steps = Array.prototype.slice.call(document.querySelectorAll('.steps__item'));\r\n\r\nlet currentStep = -1;\r\n\r\nconst onUpdateStep = () => {\r\n\tsteps.forEach((step, i) => {\r\n\t\ti === currentStep ? step.classList.add('active') : step.classList.remove('active');\r\n\t});\r\n}\r\n\r\nconst onNextStep = () => {\r\n\tif (currentStep < 3) {\r\n\t\tcurrentStep++;\r\n\t}\r\n\tonUpdateStep();\r\n}\r\n\r\nconst onPrevStep = () => {\r\n\tif (currentStep > 0) {\r\n\t\tcurrentStep--;\r\n\t}\r\n\tonUpdateStep();\r\n}\r\n\r\nconst nexts = Array.prototype.slice.call(document.querySelectorAll('.btn--next'));\r\nnexts.forEach(next => {\r\n\tnext.addEventListener('click', onNextStep);\r\n});\r\n\r\nconst prevs = Array.prototype.slice.call(document.querySelectorAll('.btn--prev'));\r\nprevs.forEach(prev => {\r\n\tprev.addEventListener('click', onPrevStep);\r\n});\r\n\r\nonNextStep();\r\n*/\r\n"]}